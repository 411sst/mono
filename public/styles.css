/* ── Reset ─────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:       #0d0f18;
  --bg2:      #12151f;
  --surface:  #181c28;
  --border:   #252b3d;
  --border2:  #2e3550;
  --gold:     #f59e0b;
  --gold2:    #fbbf24;
  --blue:     #3b82f6;
  --blue2:    #60a5fa;
  --green:    #10b981;
  --red:      #ef4444;
  --text:     #e2e8f0;
  --text2:    #94a3b8;
  --text3:    #64748b;
  --r:        10px;
  --r-sm:     6px;
}

html, body { height: 100%; }
body {
  font-family: 'Segoe UI', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  font-size: 14px;
}

/* ── LOBBY ─────────────────────────────────────────── */
#lobby {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  background: radial-gradient(ellipse 80% 60% at 50% -10%, rgba(59,130,246,.1) 0%, transparent 70%);
}
.lobby-inner { width: 100%; max-width: 680px; display: flex; flex-direction: column; gap: 16px; }
.lobby-logo {
  font-size: 2rem;
  font-weight: 900;
  letter-spacing: -.03em;
  background: linear-gradient(135deg, var(--gold), var(--gold2), #fde68a);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}
.l-panel {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 20px;
}
.l-label {
  font-size: 0.68rem; font-weight: 700; letter-spacing: .12em;
  color: var(--text3); margin-bottom: 14px;
}
.queue-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

input, select {
  padding: 9px 13px;
  border-radius: var(--r-sm);
  border: 1px solid var(--border2);
  background: var(--bg2);
  color: var(--text);
  font-size: 0.9rem;
  outline: none;
  transition: border-color .2s, box-shadow .2s;
}
input:focus, select:focus {
  border-color: var(--blue);
  box-shadow: 0 0 0 3px rgba(59,130,246,.15);
}

button {
  background: linear-gradient(135deg, var(--blue), #2563eb);
  color: #fff; border: none; border-radius: var(--r-sm);
  padding: 9px 18px; cursor: pointer;
  font-size: 0.88rem; font-weight: 600;
  transition: opacity .15s, transform .1s, box-shadow .2s;
  box-shadow: 0 2px 8px rgba(59,130,246,.35);
}
button:hover:not(:disabled) { opacity: .88; transform: translateY(-1px); }
button:active:not(:disabled) { transform: translateY(0); }
button:disabled { background: var(--border2); color: var(--text3); box-shadow: none; cursor: not-allowed; }

#queueStatus {
  margin-top: 10px; font-size: 0.82rem; color: var(--text2);
  padding: 8px 12px; background: var(--bg2); border-radius: 6px;
  border-left: 3px solid var(--blue);
}

#sessions { list-style: none; display: flex; flex-direction: column; gap: 6px; }
#sessions li {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: var(--r-sm); padding: 9px 14px;
  display: flex; justify-content: space-between; align-items: center;
  font-size: 0.85rem;
}
#sessions li button {
  font-size: 0.78rem; padding: 5px 12px;
  background: var(--surface); box-shadow: none; color: var(--text2);
}
#sessions li button:hover { background: var(--border2); color: var(--text); transform: none; }

/* ── GAME OVER ─────────────────────────────────────── */
.game-over-banner {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  background: linear-gradient(135deg, #064e3b, #065f46);
  border-bottom: 1px solid #10b981;
  color: #6ee7b7; padding: 12px 20px;
  font-size: 1rem; font-weight: 700; text-align: center;
  animation: pulse-green 2s ease-in-out infinite;
}
@keyframes pulse-green {
  0%,100% { box-shadow: 0 2px 20px rgba(16,185,129,.2); }
  50%      { box-shadow: 0 2px 40px rgba(16,185,129,.5); }
}

/* ── GAME LAYOUT ───────────────────────────────────── */
#gameRoot { height: 100vh; overflow: hidden; }
.game-layout {
  display: grid;
  grid-template-columns: 240px 1fr 280px;
  height: 100vh;
  gap: 0;
  overflow: hidden;
}

/* ── SIDEBARS ──────────────────────────────────────── */
.sidebar {
  background: var(--bg2);
  border-color: var(--border);
  display: flex; flex-direction: column;
  overflow-y: auto; overflow-x: hidden;
  height: 100vh;
  padding: 16px 12px;
  gap: 8px;
}
.sidebar::-webkit-scrollbar { width: 4px; }
.sidebar::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 4px; }
.sidebar-left { border-right: 1px solid var(--border); }
.sidebar-right { border-left: 1px solid var(--border); }

.sb-title {
  font-size: 0.66rem; font-weight: 700; letter-spacing: .14em;
  color: var(--text3); margin: 6px 0 8px;
}

/* ── CHAT ──────────────────────────────────────────── */
.chat-messages {
  flex: 1; min-height: 0;
  overflow-y: auto;
  background: var(--bg); border: 1px solid var(--border);
  border-radius: var(--r-sm); padding: 8px;
  display: flex; flex-direction: column; gap: 4px;
  max-height: 240px;
}
.chat-messages::-webkit-scrollbar { width: 3px; }
.chat-messages::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
.chat-msg {
  font-size: 0.8rem; padding: 5px 8px;
  border-radius: 5px; background: var(--surface);
  word-break: break-word; animation: fadeIn .2s ease;
}
.chat-msg.mine { background: rgba(59,130,246,.12); border: 1px solid rgba(59,130,246,.2); }
.chat-msg strong { color: var(--blue2); font-size: 0.75rem; margin-right: 4px; }
@keyframes fadeIn { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:none; } }
.chat-input-row { display: flex; gap: 6px; }
.chat-input-row input { flex: 1; font-size: 0.82rem; padding: 7px 10px; }
.chat-input-row button { padding: 7px 13px; font-size: 0.9rem; min-width: 42px; }

/* ── EVENT LOG ─────────────────────────────────────── */
.event-log {
  font-size: 0.76rem; color: var(--text2);
  display: flex; flex-direction: column; gap: 3px;
  overflow-y: auto; max-height: 220px;
}
.event-log::-webkit-scrollbar { width: 3px; }
.event-log::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 3px; }
.ev-line {
  padding: 3px 6px; border-radius: 4px;
  background: var(--surface); line-height: 1.35;
}

/* ── BOARD WRAP ────────────────────────────────────── */
.board-wrap {
  display: flex; align-items: center; justify-content: center;
  background: var(--bg);
  padding: 12px;
  overflow: hidden;
}

/* ── RING BOARD ────────────────────────────────────── */
.ring-board {
  --cs: 72px;
  /* Constrain to container width (100%) and viewport height, cap at 600px */
  width: min(100%, calc(100vh - 24px), 600px);
  aspect-ratio: 1;
  display: grid;
  grid-template-columns: var(--cs) repeat(9, 1fr) var(--cs);
  grid-template-rows: var(--cs) repeat(9, 1fr) var(--cs);
  border: 1px solid var(--border2);
  border-radius: 10px;
  overflow: hidden;
  background: var(--bg);
  flex-shrink: 0;
}

/* Board center area */
.board-center {
  grid-row: 2 / 11;
  grid-column: 2 / 11;
  background: var(--bg2);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 14px;
  border: 1px solid var(--border);
}
.board-logo {
  font-size: 1.1rem; font-weight: 900; text-align: center; line-height: 1.3;
  background: linear-gradient(135deg, var(--gold), var(--gold2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  opacity: .7;
}
.last-event-center {
  font-size: 0.72rem; color: var(--text2);
  text-align: center; padding: 0 16px;
  max-width: 280px; line-height: 1.4;
}

/* ── BOARD SPACES ──────────────────────────────────── */
.space {
  position: relative;
  background: var(--surface);
  border: 1px solid var(--border);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  cursor: default;
  transition: background .15s;
}
.space:hover { background: #1e2332; z-index: 3; }

/* Color stripe — positioned on the INSIDE edge per side */
.stripe {
  position: absolute;
  background: #555; /* overridden inline */
}
.s-bottom .stripe { top: 0; left: 0; right: 0; height: 5px; }
.s-top    .stripe { bottom: 0; left: 0; right: 0; height: 5px; }
.s-left   .stripe { top: 0; bottom: 0; right: 0; width: 5px; }
.s-right  .stripe { top: 0; bottom: 0; left: 0; width: 5px; }
.s-corner .stripe { display: none; }

/* Space body */
.space-body {
  display: flex; flex-direction: column; justify-content: space-between;
  flex: 1; padding: 5px 5px 4px;
  overflow: hidden;
}
.s-bottom .space-body,
.s-top    .space-body { padding-top: 10px; }
.s-left   .space-body,
.s-right  .space-body { padding-left: 10px; }

.space-name {
  font-size: 8.5px; font-weight: 700; line-height: 1.25;
  color: var(--text); word-break: break-word;
  display: -webkit-box; -webkit-box-orient: vertical;
  -webkit-line-clamp: 3; overflow: hidden;
}
.space-type {
  font-size: 7.5px; color: var(--text3); margin-top: 1px; line-height: 1;
}
.space-price {
  font-size: 8px; font-weight: 700; color: var(--gold2);
  margin-top: 2px; display: block;
}
.space-owner {
  font-size: 7.5px; color: var(--gold); display: block;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
  margin-top: 1px;
}

/* Corner spaces */
.s-corner {
  background: var(--bg2);
  border-color: var(--border2);
}
.corner-inner {
  width: 100%; height: 100%;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  gap: 3px;
  text-align: center;
}
.corner-icon { font-size: 1.5rem; }
.corner-name { font-size: 8.5px; font-weight: 700; color: var(--text2); line-height: 1.2; }

/* Space type tints */
.space.chance        { background: rgba(251,191,36,.06); }
.space.communitychest{ background: rgba(59,130,246,.06); }
.space.tax           { background: rgba(239,68,68,.06); }
.space.railroad      { background: rgba(148,163,184,.05); }
.space.utility       { background: rgba(74,222,128,.06); }
.space.owned         { background: rgba(245,158,11,.05); }

/* Tokens in spaces */
.space-tokens { display: flex; flex-wrap: wrap; gap: 2px; margin-top: 3px; }
.token {
  display: inline-flex; align-items: center; justify-content: center;
  width: 16px; height: 16px; border-radius: 50%;
  font-size: 7.5px; font-weight: 800; border: 1.5px solid;
  text-transform: uppercase;
}
.space-houses { font-size: 8px; margin-top: 2px; }

/* ── PLAYER CARDS ──────────────────────────────────── */
#dash { display: flex; flex-direction: column; gap: 6px; margin-bottom: 6px; }
.player-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--r-sm); padding: 10px 12px;
  position: relative; transition: border-color .2s;
}
.player-card.active { border-color: var(--green); box-shadow: 0 0 12px rgba(16,185,129,.18); }
.player-card.me     { border-color: var(--blue); }
.player-card.me.active { border-color: var(--blue2); }
.player-card.bankrupt { opacity: .35; }
.pc-name {
  display: flex; align-items: center; gap: 7px;
  font-size: 0.88rem; font-weight: 700; margin-bottom: 3px;
}
.pc-cash { font-size: 1rem; font-weight: 800; color: var(--gold2); }
.pc-tags { display: flex; flex-wrap: wrap; gap: 3px; margin-top: 5px; }
.pc-tag {
  font-size: 0.63rem; font-weight: 700; padding: 2px 6px;
  border-radius: 20px; text-transform: uppercase; letter-spacing: .05em;
}
.pc-tag.jail    { background: rgba(239,68,68,.2); color: #fca5a5; }
.pc-tag.pardon  { background: rgba(139,92,246,.2); color: #c4b5fd; }
.pc-tag.bankrupt{ background: rgba(239,68,68,.15); color: #f87171; }
.player-avatar {
  width: 26px; height: 26px; border-radius: 50%;
  display: inline-flex; align-items: center; justify-content: center;
  font-size: 0.82rem; font-weight: 800; flex-shrink: 0;
}
.turn-indicator {
  position: absolute; top: 9px; right: 9px;
  font-size: 0.6rem; font-weight: 700; color: var(--green);
  text-transform: uppercase; letter-spacing: .08em;
  display: flex; align-items: center; gap: 4px;
}
.turn-indicator::before {
  content: ''; width: 5px; height: 5px; border-radius: 50%;
  background: var(--green); animation: blink 1.1s ease-in-out infinite;
}
@keyframes blink { 0%,100% { opacity:1; } 50% { opacity:.1; } }

/* ── ACTIONS ───────────────────────────────────────── */
.actions {
  display: flex; flex-wrap: wrap; gap: 6px;
  padding: 10px 0; border-bottom: 1px solid var(--border);
  margin-bottom: 10px;
}
.actions button { font-size: 0.8rem; padding: 7px 12px; }
#rollBtn  { background: linear-gradient(135deg,#7c3aed,#5b21b6); box-shadow: 0 2px 8px rgba(124,58,237,.4); }
#endBtn   { background: linear-gradient(135deg,#0f766e,#0d9488); box-shadow: 0 2px 8px rgba(15,118,110,.4); }
#buyBtn   { background: linear-gradient(135deg,#92400e,#b45309); box-shadow: 0 2px 8px rgba(180,83,9,.4); }
#payJailBtn   { background: linear-gradient(135deg,#dc2626,#b91c1c); }
#usePardonBtn { background: linear-gradient(135deg,#7c3aed,#6d28d9); }

/* ── PROPERTY PANEL ────────────────────────────────── */
#propPanel { margin-bottom: 10px; }
.prop-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 5px 8px; background: var(--bg2); border: 1px solid var(--border);
  border-radius: 5px; margin-bottom: 4px; gap: 6px;
}
.prop-name { font-size: 0.78rem; flex: 1; display: flex; align-items: center; gap: 5px;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.prop-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.prop-btns { display: flex; gap: 4px; }
.prop-btns button { font-size: 0.7rem; padding: 3px 7px; }
.prop-build   { background: linear-gradient(135deg,#059669,#047857) !important; }
.prop-sell    { background: linear-gradient(135deg,#d97706,#b45309) !important; }
.prop-mortgage{ background: linear-gradient(135deg,#374151,#1f2937) !important; box-shadow:none !important; }
.prop-unmortgage{ background: linear-gradient(135deg,#1d4ed8,#1e40af) !important; }

/* ── TRADE ─────────────────────────────────────────── */
#pendingTrade { display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; }
.pending-trade-card {
  background: var(--bg2); border: 1px solid var(--border2);
  border-radius: var(--r-sm); padding: 10px;
}
.trade-header { font-size: 0.82rem; margin-bottom: 8px; color: var(--text2); }
.trade-header strong { color: var(--text); }
.trade-cols { display: flex; gap: 8px; margin: 8px 0; }
.trade-section {
  flex: 1; background: var(--bg); border: 1px solid var(--border);
  border-radius: 5px; padding: 8px;
  display: flex; flex-direction: column; gap: 5px;
}
.trade-section > strong {
  font-size: 0.62rem; font-weight: 700; text-transform: uppercase;
  letter-spacing: .1em; color: var(--text3);
}
.trade-section label { display: flex; align-items: center; gap: 5px; font-size: 0.78rem; color: var(--text2); }
.trade-section input[type="number"] { width: 70px; padding: 4px 7px; font-size: 0.8rem; }
.trade-props {
  display: flex; flex-direction: column; gap: 2px;
  max-height: 90px; overflow-y: auto;
}
.trade-props label { font-size: 0.74rem; }
.trade-row { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 0.82rem; color: var(--text2); }
#tradeMessage { width: 100%; margin: 6px 0; font-size: 0.82rem; padding: 6px 9px; }
#tradeOfferBtn { background: linear-gradient(135deg,#059669,#047857); box-shadow: 0 2px 8px rgba(5,150,105,.4); }
.pending-trade-actions { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
.trade-accept-btn { background: linear-gradient(135deg,#059669,#047857) !important; }
.trade-reject-btn { background: linear-gradient(135deg,#dc2626,#b91c1c) !important; }
.trade-cancel-btn { background: linear-gradient(135deg,#78350f,#92400e) !important; }
.trade-msg { font-size: 0.75rem; color: var(--text3); font-style: italic; }

/* ── DICE ──────────────────────────────────────────── */
.dice-row { display: flex; align-items: center; gap: 10px; }
.die {
  width: 44px; height: 44px; background: #fff; border-radius: 9px;
  display: grid; grid-template: repeat(3,1fr) / repeat(3,1fr);
  padding: 6px; gap: 3px;
  box-shadow: 0 4px 12px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.8);
}
.die.rolling { animation: shake .5s ease-in-out; }
@keyframes shake {
  0%,100% { transform: rotate(0) scale(1); }
  20%      { transform: rotate(-15deg) scale(1.1); }
  40%      { transform: rotate(12deg) scale(1.05); }
  60%      { transform: rotate(-8deg) scale(1.08); }
  80%      { transform: rotate(5deg) scale(1.03); }
}
.pip { width:100%; height:100%; border-radius:50%; background:#1e1b4b; }
.die-total { font-size: 1rem; font-weight: 800; color: var(--text2); }
.die-doubles {
  font-size: 0.7rem; font-weight: 700; color: var(--gold);
  background: rgba(245,158,11,.12); padding: 2px 7px;
  border-radius: 20px; border: 1px solid rgba(245,158,11,.3);
}

/* ── PLAYER COLORS ─────────────────────────────────── */
.p0 { background:#3b82f6; border-color:#93c5fd; color:#fff; }
.p1 { background:#ec4899; border-color:#f9a8d4; color:#fff; }
.p2 { background:#10b981; border-color:#6ee7b7; color:#fff; }
.p3 { background:#f59e0b; border-color:#fde68a; color:#1c1917; }
.p4 { background:#8b5cf6; border-color:#c4b5fd; color:#fff; }
.p5 { background:#ef4444; border-color:#fca5a5; color:#fff; }

/* ── SCROLLBAR ─────────────────────────────────────── */
::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 5px; }
